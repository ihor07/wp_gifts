<?php
$link_url_meta  = get_post_meta( get_the_ID(), 'qodef_post_format_link', true );
$link_url       = ! empty( $link_url_meta ) ? $link_url_meta : get_the_permalink();
$link_text_meta = get_post_meta( get_the_ID(), 'qodef_post_format_link_text', true );

if ( ! empty( $link_url ) ) {
	$link_text = ! empty( $link_text_meta ) ? $link_text_meta : get_the_title();
	$title_tag = isset( $title_tag ) && ! empty( $title_tag ) ? $title_tag : 'h3';
	?>
	<div class="qodef-e-link">
	<svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	     width="40.583px" height="40.583px" viewBox="0 0 40.583 40.583" enable-background="new 0 0 40.583 40.583" xml:space="preserve">
	<g>
	<path d="M21.099,23.245c0.364,0.781,0.547,1.693,0.547,2.734c0,1.512-0.469,2.891-1.406,4.141v0.078l-7.5,7.422
		c-1.406,1.824-3.23,2.734-5.469,2.734c-1.875,0-3.49-0.676-4.844-2.031c-1.355-1.25-2.031-2.863-2.031-4.844
		c0-1.822,0.676-3.41,2.031-4.766l8.203-8.203c1.25-0.938,2.629-1.406,4.141-1.406c1.041,0,1.953,0.184,2.734,0.547l-0.469,1.172
		c-0.678-0.313-1.433-0.469-2.266-0.469c-1.199,0-2.318,0.365-3.359,1.094l-8.047,8.125c-1.146,1.146-1.719,2.449-1.719,3.906
		c0,1.459,0.547,2.787,1.641,3.984c1.094,1.094,2.422,1.641,3.984,1.641c1.926,0,3.438-0.754,4.531-2.266V36.76l7.5-7.422
		c0.729-1.041,1.094-2.16,1.094-3.359c0-0.781-0.156-1.535-0.469-2.266L21.099,23.245z M25.552,14.26l-11.25,11.25l0.938,0.938
		l11.25-11.25L25.552,14.26z M38.365,2.385c1.354,1.25,2.031,2.865,2.031,4.844c0,1.511-0.469,2.891-1.406,4.141v0.078l-7.5,7.422
		c-1.406,1.824-3.23,2.734-5.469,2.734c-1.042,0-1.953-0.182-2.734-0.547l0.469-1.172c0.676,0.313,1.432,0.469,2.266,0.469
		c1.822,0,3.333-0.754,4.531-2.266V18.01l7.5-7.422c0.729-1.041,1.094-2.161,1.094-3.359c0-1.458-0.547-2.786-1.641-3.984
		c-1.094-1.094-2.422-1.641-3.984-1.641c-1.199,0-2.318,0.365-3.359,1.094l-8.047,8.125c-1.146,1.146-1.719,2.449-1.719,3.906
		c0,0.781,0.156,1.537,0.469,2.266l-0.547,0.234l0.547-0.234c0,0.053,0.025,0.105,0.078,0.156l-1.094,0.547
		c-0.053,0-0.078-0.051-0.078-0.156l-0.078-0.078c-0.365-0.781-0.547-1.692-0.547-2.734c0-1.77,0.676-3.385,2.031-4.844L29.38,1.76
		c1.197-0.938,2.578-1.406,4.141-1.406C35.396,0.354,37.01,1.032,38.365,2.385z"/>
	</g>
	</svg>
		<<?php echo esc_attr( $title_tag ); ?> class="qodef-e-link-text"><?php echo esc_html( $link_text ); ?></<?php echo esc_attr( $title_tag ); ?>>
		<a itemprop="url" class="qodef-e-link-url" href="<?php echo esc_url( $link_url ); ?>" target="_blank"></a>
	</div>
<?php } ?>
