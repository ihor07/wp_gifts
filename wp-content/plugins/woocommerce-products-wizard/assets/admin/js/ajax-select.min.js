function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module&&"function"==typeof require?module.exports=e(require("jquery")):e(t.jQuery)}(this,(function(t){"use strict";var e="wcpwAjaxSelect",n={},a={},i={},r=t(document),o=function(e,a){return this.element=e,this.options=t.extend({},n,a),this.init()};o.prototype.init=function(){var e=this;return this.$element=t(this.element),this.$input=this.$element.next('[data-component~="wcpw-ajax-select-input"]'),this.$target=!1,this.ajaxUrl=this.$element.data("ajax-url"),this.$element.data("target-parent")&&(this.$target=this.$element.parents(this.$element.data("target-parent"))),this.$element.data("target-selector")&&(this.$target?this.$target=this.$target.find(this.$element.data("target-selector")):this.$target=t(this.$element.data("target-selector"))),this.getItems().done((function(t){e.updateItems(t),e.$element.data("value")&&e.$element.val(e.$element.data("value"))})),this.$target.off("change.ajaxSelect.wcpw").on("change.ajaxSelect.wcpw",(function(){return e.getItems().done((function(t){return e.updateItems(t)}))})),this},o.prototype.getItems=function(){var e=this,n=this.$element.data("action"),r=this.$target.val();if(""===r||void 0===r)return t.when("");var o={action:n,value:r};if(i[n]&&i[n][r])return t.when(i[n][r]);if(a[n]&&a[n][r])return a[n][r];var s=t.ajax({url:this.ajaxUrl,data:o,dataType:"json",success:function(t){i[n]||(i[n]={}),i[n][r]=t,e.$element.trigger("updated.items.ajaxSelect.wcpw",[e,t])}});return a[n]||(a[n]={}),a[n][r]=s,s},o.prototype.updateItems=function(e){var n=this;return this.$element.empty(),e?(this.$element.attr("disabled",!1).attr("hidden",!1),this.$input.attr("disabled",!0).attr("hidden",!0),t.each(e,(function(t,e){n.$element.append(new Option(e,t,!1,!1))}))):(this.$element.attr("disabled",!0).attr("hidden",!0),this.$input.attr("disabled",!1).attr("hidden",!1)),this.$element.trigger("change"),this},t.fn[e]=function(n){return this.each((function(){t.data(this,e)||t.data(this,e,new o(this,n))}))};var s=function(){return t('[data-component~="wcpw-ajax-select"]').each((function(){return t(this).wcpwAjaxSelect()}))};r.ready((function(){return s()})),r.on("init.ajaxSelect.wcpw",(function(){return s()}))}));