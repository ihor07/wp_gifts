function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module&&"function"==typeof require?module.exports=e(require("jquery")):e(t.jQuery)}(this,(function(t){"use strict";var e="wcpwDataTable",n={},i=t(document),a=function(e,i){return this.element=e,this.options=t.extend({},n,i),this.init()};a.prototype.init=function(){var e=this;return this.$element=t(this.element),this.$body=this.$element.children("table").children("tbody"),this.$template=this.$element.children("fieldset").children("table").children("tbody").children('[data-component~="wcpw-data-table-item"]'),t.fn.sortable&&this.$element.sortable({items:'[data-component~="wcpw-data-table-item"]',distance:50,update:function(){return e.recalculateIds()},cancel:"input,textarea,button,select,option,.wcpw-modal"}),this.initEventListeners()},a.prototype.initEventListeners=function(){var e=this;return this.$element.on("click",'[data-component~="wcpw-data-table-item-add"]',(function(){return e.addItem(t(this).closest('[data-component~="wcpw-data-table-item"]'))})),this.$element.on("click",'[data-component~="wcpw-data-table-item-remove"]',(function(){return e.removeItem(t(this).closest('[data-component~="wcpw-data-table-item"]'))})),this.$element.on("click",'[data-component~="wcpw-data-table-item-clone"]',(function(){return e.cloneItem(t(this).closest('[data-component~="wcpw-data-table-item"]'))})),this},a.prototype.addItem=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$template;e=0!==e.length?e:this.$body.children('[data-component~="wcpw-data-table-item"]:last'),0===n.length&&(n=e);var i=n.clone();i.find(":input").each((function(){var e=this;t.each(this.attributes,(function(t,n){var i=n.name,a=n.value;return-1===i.indexOf("data-make")?e:e.setAttribute(i.replace("data-make-",""),a)}))}));var a=i.find('[data-component~="wcpw-data-table-item-modal"]'),o=i.find('[data-component~="wcpw-data-table-item-open-modal"]'),r=Math.random().toString(36).substr(2);return a.attr("id",a.attr("id")+"-".concat(r.toString())),o.attr("href",o.attr("href")+"-".concat(r.toString())),i.insertAfter(e),this.recalculateIds(),this.$element.trigger("added.item.dataTable.wcpw",[this,i]),i},a.prototype.removeItem=function(t){return t.is(":only-child")?t.find(":input").val("").trigger("change"):t.remove(),this.recalculateIds(),this.$element.trigger("removed.item.dataTable.wcpw",[this]),this},a.prototype.cloneItem=function(t){var e=this.addItem(t,t);return this.$element.trigger("cloned.item.dataTable.wcpw",[this,e]),this},a.prototype.recalculateIds=function(){return this.$body.children('[data-component~="wcpw-data-table-item"]').each((function(e){return t(this).find(":input").each((function(){var t=this.getAttribute("name");if(t){var n=e.toString().split("").reverse().join("");this.setAttribute("name",t.split("").reverse().join("").replace(/]\d+\[/,"]".concat(n,"[")).split("").reverse().join(""))}}))})),this},t.fn[e]=function(n){return this.each((function(){t.data(this,e)||t.data(this,e,new a(this,n))}))};var o=function(){return t('[data-component~="wcpw-data-table"]').each((function(){return t(this).wcpwDataTable()}))};i.ready((function(){return o()})),i.on("init.dataTable.wcpw",(function(){return o()}))}));