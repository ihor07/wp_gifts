function _defineProperty(t,e,r){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==r.return||r.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module&&"function"==typeof require?module.exports=e(require("jquery")):e(t.jQuery)}(this,(function(t){"use strict";var e="wcpw",r={documentNode:document,windowNode:window,rootSelector:"html, body",searchStringMinLength:3,ajaxActions:{submit:"wcpwSubmit",addToMainCart:"wcpwAddToMainCart",getStep:"wcpwGetStep",skipStep:"wcpwSkipStep",skipAll:"wcpwSkipAll",submitAndSkipAll:"wcpwSubmitAndSkipAll",reset:"wcpwReset",addCartProduct:"wcpwAddCartProduct",removeCartProduct:"wcpwRemoveCartProduct",updateCartProduct:"wcpwUpdateCartProduct",addCartStepData:"wcpwAddCartStepData",removeCartStepData:"wcpwRemoveCartStepData",search:"wcpwSearch"}},a=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.element=e,this.customOptions=a,this.options=t.extend({},r,a),this.init()};a.prototype.init=function(){return this.$root=t(this.options.rootSelector),this.$document=t(this.options.documentNode),this.$element=t(this.element),this.hasError=!1,this.preventAjaxRequest=!1,this.productsWithError=[],this.ajaxRequestsQueue=[],this.initEventListeners().triggerEvent("launched.wcpw",[this])},a.prototype.ajaxRequest=function(e){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.preventAjaxRequest=!1;var i=e instanceof FormData?e:new FormData,o={updateQueryArgs:!0,queryArgs:{},currentQueryArgs:this.getQueryArgs(),processData:!1,contentType:!1,cache:!1,method:"post",scrollingTopOnUpdate:Boolean(this.options.scrollingTopOnUpdate),scrollingGap:Number(this.options.scrollingUpGap),scrollingSpeed:500,scrollingToElement:null,passProducts:!1,passStepData:!1,errorsAlerting:!0,errorsLogging:!0,lazy:!1};if(a=this.extendObject(o,a),!(e instanceof FormData))for(var n in e)e.hasOwnProperty(n)&&i.append(n,"string"!=typeof e[n]?JSON.stringify(e[n]):e[n]);if(delete e.stepsData,a.passStepData){var s,c=this.element.querySelector('[data-component~="wcpw-form"]')||this.options.documentNode.querySelector('[data-component~="wcpw-form"]'),p=new FormData(c),d=i.get("stepDataToAddKey"),u=_createForOfIteratorHelper(p.entries());try{for(u.s();!(s=u.n()).done;){var l=s.value;if(l[0].includes("stepsData")&&("object"===_typeof(l[1])&&l[1].name||"string"==typeof l[1])){if(d&&l[0]!==d)continue;i.append(l[0],l[1])}}}catch(t){u.e(t)}finally{u.f()}}for(var h in a.passProducts||(i.delete("productsToAdd"),i.delete("productsToAddChecked")),this.customOptions)this.customOptions.hasOwnProperty(h)&&i.append(h,"string"!=typeof this.customOptions[h]?JSON.stringify(this.customOptions[h]):this.customOptions[h]);if(i.delete("add-to-cart"),a.currentQueryArgs.get&&(a.currentQueryArgs.has("wcpwFilter")&&i.append("wcpwFilter",a.currentQueryArgs.get("wcpwFilter")),a.currentQueryArgs.has("wcpwPage")&&i.append("wcpwPage",a.currentQueryArgs.get("wcpwPage")),a.currentQueryArgs.has("wcpwProductsPerPage")&&i.append("wcpwProductsPerPage",a.currentQueryArgs.get("wcpwProductsPerPage")),a.currentQueryArgs.has("wcpwOrderBy")&&i.append("wcpwOrderBy",a.currentQueryArgs.get("wcpwOrderBy"))),a.queryArgs)for(var w in a.queryArgs)a.queryArgs.hasOwnProperty(w)&&i.append(w,a.queryArgs[w]);if(this.triggerEvent("ajaxRequest.wcpw",[this,i,a]),this.preventAjaxRequest)return this.triggerEvent("ajaxPrevent.wcpw",[this,i,a]),t.when();this.$element.addClass(a.lazy?"is-lazy-loading":"is-loading"),this.element.setAttribute("aria-live","polite"),this.element.setAttribute("aria-busy","true");var g=t.ajax({url:this.options.ajaxUrl,method:a.method,data:i,processData:a.processData,contentType:a.contentType,cache:a.cache,success:function(t){r.triggerEvent("ajaxSuccess.wcpw",[r,t,i,a]);var e=r.ajaxRequestsQueue.indexOf(g);if(e>-1&&r.ajaxRequestsQueue.splice(e,1),a.lazy&&r.ajaxRequestsQueue.length>0)return t;r.$element.removeClass("is-lazy-loading is-loading"),r.element.setAttribute("aria-busy","false"),t.content&&r.$element.html(t.content);var o,n=_createForOfIteratorHelper(r.element.querySelectorAll('[data-component~="wcpw-nav"]'));try{for(n.s();!(o=n.n()).done;){var s=o.value,c=s.querySelector('[data-component~="wcpw-nav-list"]');c&&(c.scrollLeft=s.querySelector(".active").offsetLeft)}}catch(t){n.e(t)}finally{n.f()}if(a.scrollingTopOnUpdate){var p=r.element.querySelector(a.scrollingToElement||'[data-component~="wcpw-form-step"].is-active');p&&!r.isScrolledIntoView(p)&&r.scrollToElement(p,Number(a.scrollingGap),Number(a.scrollingSpeed))}return a.updateQueryArgs&&a.queryArgs&&(t.hasOwnProperty("stateHash")&&(a.queryArgs.wcpwStateHash=t.stateHash),t.hasOwnProperty("saveStateToURL")&&Boolean(t.saveStateToURL)?(t.hasOwnProperty("id")&&(a.queryArgs.wcpwId=t.id),t.hasOwnProperty("stepId")&&(a.queryArgs.wcpwStep=t.stepId),t.hasOwnProperty("cart")&&(a.queryArgs.wcpwCart=JSON.stringify(t.cart))):a.queryArgs.wcpwStep=!1,0!==Object.keys(a.queryArgs).filter((function(t){return!1!==a.queryArgs[t]})).length&&r.setQueryArg(a.queryArgs)),r.triggerEvent("ajaxCompleted.wcpw",[r,t,i,a]),t},error:function(t,e,o){r.triggerEvent("ajaxError.wcpw",[r,o,i,a]);var n=r.ajaxRequestsQueue.indexOf(g);return n>-1&&r.ajaxRequestsQueue.splice(n,1),r.$element.removeClass("is-lazy-loading is-loading"),r.element.setAttribute("aria-busy","false"),a.errorsLogging&&r.options.windowNode.console.error(t,e,o),a.errorsAlerting&&r.options.windowNode.alert("Unexpected error occurred: ".concat(t.status,", ").concat(t.statusText)),o}});return this.ajaxRequestsQueue.push(g),g},a.prototype.search=function(e,r,a){if(!e||e.length<this.options.searchStringMinLength)return t.when();var i=this.element.querySelector(r),o=i.getAttribute("data-item-template"),n={action:this.options.ajaxActions.search,id:this.options.id,query:e};return t.ajax({url:this.options.ajaxUrl,method:"get",data:this.extendObject(n,a),success:function(t){var e=[];if(t.items.length>0)for(var r in t.items)if(t.items.hasOwnProperty(r)){var a=o;for(var n in t.items[r])t.items[r].hasOwnProperty(n)&&(a=a.replace(new RegExp("\\${"+n+"}","g"),t.items[r][n]));e.push(a)}return i.innerHTML=e.join(""),t}})},a.prototype.delegateEventListener=function(t,e,r){this.$element.on(t,e,r)},a.prototype.unDelegateEventListener=function(t,e){this.$element.off(t,e)},a.prototype.initEventListeners=function(){var e=this,r=this;return this.options.windowNode.addEventListener("popstate",(function(t){return e.popState(t)}),!1),this.delegateEventListener("click.thumbnail.product.wcpw",'[data-component~="wcpw-product-thumbnail-link"]',(function(t){return t.preventDefault()})),this.delegateEventListener("click.product.wcpw",'[data-component~="wcpw-product"]',(function(){var e=t(this).find('[data-component~="wcpw-product-choose"][type="radio"]');!e||e.is(":checked")||e.is(":disabled")||e.prop("checked",!0).trigger("change")})),this.delegateEventListener("click.add.product.cart.wcpw",'[data-component~="wcpw-add-cart-product"]',(function(e){var a=this,i=t(this);if(i.hasClass("disabled"))return e.preventDefault();var o=i.closest('[data-component~="wcpw-product"]'),n=r.$element.find(":input:not(:disabled):not(button)").filter((function(){return 0===t(this).closest(o).length}));return n.prop("disabled",!0),r.options.documentNode.querySelector("#"+this.getAttribute("form")).checkValidity()?(n.prop("disabled",!1),i.addClass("is-loading"),this.setAttribute("aria-busy","true"),e.preventDefault(),r.addCartProduct({productToAddKey:this.value},i.data("add-cart-product-options")).always((function(){i.removeClass("is-loading"),a.setAttribute("aria-busy","false")}))):(n.prop("disabled",!1),this)})),this.delegateEventListener("click.update.product.cart.wcpw",'[data-component~="wcpw-update-cart-product"]',(function(e){var a=this,i=t(this);if(i.hasClass("disabled"))return e.preventDefault();var o=i.closest('[data-component~="wcpw-product"]'),n=r.$element.find(":input:not(:disabled):not(button)").filter((function(){return 0===t(this).closest(o).length}));return n.prop("disabled",!0),r.options.documentNode.querySelector("#"+this.getAttribute("form")).checkValidity()?(n.prop("disabled",!1),i.addClass("is-loading"),this.setAttribute("aria-busy","true"),e.preventDefault(),r.updateCartProduct({productCartKey:this.value},i.data("update-cart-product-options")).always((function(){i.removeClass("is-loading"),a.setAttribute("aria-busy","false")}))):(n.prop("disabled",!1),this)})),this.delegateEventListener("click.remove.product.cart.wcpw",'[data-component~="wcpw-remove-cart-product"]',(function(e){var a=this;e.preventDefault();var i=t(this);return i.addClass("is-loading"),this.setAttribute("aria-busy","true"),r.removeCartProduct({productCartKey:this.value},i.data("remove-cart-product-options")).always((function(){i.removeClass("is-loading"),a.setAttribute("aria-busy","false")}))})),this.delegateEventListener("change.add.stepData.cart.wcpw",'[data-component~="wcpw-add-cart-step-data"]',(function(e){var a=this,i=t(this);return i.hasClass("disabled")?e.preventDefault():(e.preventDefault(),i.addClass("is-loading"),this.setAttribute("aria-busy","true"),r.addCartStepData({stepDataToAddKey:this.getAttribute("name")},i.data("add-cart-step-data-options")).always((function(){i.removeClass("is-loading"),a.setAttribute("aria-busy","false")})))})),this.delegateEventListener("change.remove.stepData.cart.wcpw",'[data-component~="wcpw-remove-cart-step-data"]',(function(e){var a=this;e.preventDefault();var i=t(this);return i.addClass("is-loading"),this.setAttribute("aria-busy","true"),r.removeCartStepData({stepDataKey:this.getAttribute("data-name"),stepId:this.getAttribute("data-step-id")},i.data("remove-cart-step-data-options")).always((function(){i.removeClass("is-loading"),a.setAttribute("aria-busy","false")}))})),this.delegateEventListener("click.nav.wcpw",'[data-component~="wcpw-nav-item"]',(function(t){var e=this.getAttribute("data-nav-action"),a={action:e};return r.options.documentNode.querySelector("#"+this.getAttribute("form")).checkValidity()||-1===["submit","add-to-main-cart","add-to-main-cart-repeat"].indexOf(e)?(t.preventDefault(),this.getAttribute("data-nav-id")&&(a.stepId=this.getAttribute("data-nav-id")),r.navRouter(a)):this})),this.delegateEventListener("click.share.wcpw",'[data-component~="wcpw-share"]',(function(t){return r.setClipboard(this.getAttribute("href"))&&(t.preventDefault(),this.querySelector("*").innerText=this.getAttribute("data-share-success-message")),this})),this.delegateEventListener("submit.filter.wcpw",'[data-component~="wcpw-filter"]',(function(t){t.preventDefault();var e=r.getQueryArgs(),a=r.serializeObject(this).wcpwFilter,i=this.getAttribute("data-step-id"),o={},n={};return e.get&&(e.has("wcpwFilter")&&e.get("wcpwFilter")&&(n=r.queryStringToObject(e.get("wcpwFilter"))),e.has("wcpwPage")&&e.get("wcpwPage")&&((o=r.queryStringToObject(e.get("wcpwPage")))[i]=1)),n=r.extendObject(n,a),r.getStep({stepId:i},{queryArgs:{wcpwFilter:r.objectToQueryParam(n),wcpwPage:r.objectToQueryParam(o)}})})),this.delegateEventListener("reset.filter.wcpw",'[data-component~="wcpw-filter"]',(function(t){t.preventDefault();var e=r.getQueryArgs(),a=r.serializeObject(this).wcpwFilter,i=this.getAttribute("data-step-id"),o={};return e.get&&e.has("wcpwFilter")&&(o=r.queryStringToObject(e.get("wcpwFilter"))),o=r.extendObject(o,_defineProperty({},Object.keys(a)[0],{})),r.getStep({stepId:i},{queryArgs:{wcpwFilter:r.objectToQueryParam(o)}})})),this.delegateEventListener("change.autoSubmit.wcpw",'[data-component~="wcpw-submit-on-change"]',(function(){return t(this).submit()})),this.delegateEventListener("input.search.wcpw",'[data-component~="wcpw-search-form-input"]',(function(){var e=this,a=t(this),i=r.serializeObject(this.closest('[data-component~="wcpw-filter"]'));return this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchPromise&&this.searchPromise.abort&&this.searchPromise.abort(),i.stepId=this.getAttribute("data-step-id"),this.searchTimeout=setTimeout((function(){a.addClass("is-loading"),e.setAttribute("aria-busy","true"),e.searchPromise=r.search(e.value,e.getAttribute("data-target"),i).always((function(){a.removeClass("is-loading"),e.setAttribute("aria-busy","false")}))}),1e3),this.searchTimeout})),this.delegateEventListener("click.result.search.wcpw",'[data-component~="wcpw-search-form-results"] [data-value]',(function(t){t.preventDefault();var e=this.closest('[data-component~="wcpw-search-form-results"]').getAttribute("data-target");return e&&(r.element.querySelector(e).value=this.getAttribute("data-value")),this})),this.delegateEventListener("click.pagination.wcpw",'[data-component~="wcpw-form-pagination-link"]',(function(t){t.preventDefault();var e=r.getQueryArgs(),a=this.getAttribute("data-step-id"),i=this.getAttribute("data-page"),o={};return e.get&&e.has("wcpwPage")&&e.get("wcpwPage")&&(o=r.queryStringToObject(e.get("wcpwPage"))),o[a]=i,r.getStep({stepId:a,page:i},{queryArgs:{wcpwPage:r.objectToQueryParam(o)},scrollingTopOnUpdate:!0,scrollingToElement:'[data-component~="wcpw-form-step"][data-id="'.concat(a,'"]')})})),this.delegateEventListener("submit.productsPerPage.wcpw",'[data-component~="wcpw-form-products-per-page"]',(function(t){t.preventDefault();var e=r.getQueryArgs(),a=r.serializeObject(this),i=this.getAttribute("data-step-id"),o={},n={};return e.get&&(e.has("wcpwProductsPerPage")&&(n=r.queryStringToObject(e.get("wcpwProductsPerPage"))),e.has("wcpwPage")&&e.get("wcpwPage")&&((o=r.queryStringToObject(e.get("wcpwPage")))[i]=1)),n[i]=a.wcpwProductsPerPage[i],r.getStep({stepId:i},{queryArgs:{wcpwProductsPerPage:r.objectToQueryParam(n),wcpwPage:r.objectToQueryParam(o)}})})),this.delegateEventListener("submit.orderBy.wcpw",'[data-component~="wcpw-form-order-by"]',(function(t){t.preventDefault();var e=r.getQueryArgs(),a=r.serializeObject(this),i=this.getAttribute("data-step-id"),o={};return e.get&&e.has("wcpwOrderBy")&&(o=r.queryStringToObject(e.get("wcpwOrderBy"))),o[i]=a.wcpwOrderBy[i],r.getStep({stepId:i},{queryArgs:{wcpwOrderBy:r.objectToQueryParam(o)}})})),this.delegateEventListener("click.toggle.wcpw",'[data-component~="wcpw-toggle"]',(function(t){t.preventDefault();var e=this.getAttribute("data-target")||this.getAttribute("href"),a=r.element.querySelector(e),i="false"===a.getAttribute("aria-expanded");return this.setAttribute("aria-expanded",i?"true":"false"),a.setAttribute("aria-expanded",i?"true":"false"),r.options.documentNode.cookie="".concat(e,"-expanded=").concat(String(i),"; path=/"),r.triggerEvent("toggle.wcpw",[this,a]),this})),this},a.prototype.triggerEvent=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.$element.trigger(t,e),this},a.prototype.popState=function(e){var r={action:this.options.ajaxActions.getStep},a=e&&e.state&&e.state.path;if(!a)return t.when();var i=new URL(a).searchParams;return i.has("wcpwStep")&&(r.stepId=i.get("wcpwStep")),i.has("wcpwFilters")&&(r.filters=this.queryStringToObject(i.get("wcpwFilters"))[r.stepId]),i.has("wcpwPages")&&(r.page=this.queryStringToObject(i.get("wcpwPages"))[r.stepId]),i.has("wcpwOrderBy")&&(r.orderby=this.queryStringToObject(i.get("wcpwOrderBy"))[r.stepId]),this.ajaxRequest(r,{updateQueryArgs:!1})},a.prototype.addCartProduct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t=this.extendObject({action:this.options.ajaxActions.addCartProduct},t),(e=this.extendObject({behavior:"default",passProducts:!0,passStepData:!1},e)).behavior){default:case"default":return this.submit(t,this.extendObject({scrollingTopOnUpdate:!1},e));case"submit":return this.submit(t,e);case"add-to-main-cart":return this.addToMainCart(t,e)}},a.prototype.updateCartProduct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t=this.extendObject({action:this.options.ajaxActions.updateCartProduct},t),(e=this.extendObject({behavior:"default",passProducts:!0,passStepData:!1},e)).behavior){default:case"default":return this.submit(t,this.extendObject({scrollingTopOnUpdate:!1},e));case"submit":return this.submit(t,e);case"add-to-main-cart":return this.addToMainCart(t,e)}},a.prototype.removeCartProduct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this.extendObject({action:this.options.ajaxActions.removeCartProduct},t),e=this.extendObject({scrollingTopOnUpdate:!1,passProducts:!0},e),this.ajaxRequest(t,e)},a.prototype.addCartStepData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch((e=this.extendObject({behavior:"default",passProducts:!1,passStepData:!0},e)).behavior){default:case"default":return this.submit(this.extendObject({action:this.options.ajaxActions.addCartStepData},t),this.extendObject({scrollingTopOnUpdate:!1},e));case"submit":return this.submit(t,e);case"add-to-main-cart":return this.addToMainCart(t,e)}},a.prototype.removeCartStepData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this.extendObject({action:this.options.ajaxActions.removeCartStepData},t),e=this.extendObject({scrollingTopOnUpdate:!1},e),this.ajaxRequest(t,e)},a.prototype.addToMainCart=function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=this.extendObject({action:this.options.ajaxActions.addToMainCart},r),a=this.extendObject({preventRedirect:!1,passProducts:!0,passStepData:!0},a);var i=this.submit(r,a);return this.triggerEvent("addToMainCart.wcpw",[this,r,i]),i?i.done((function(t){return t.hasError||e.hasError?(e.triggerEvent("addToMainCartError.wcpw",[e,r,t]),t):(a.preventRedirect||t.preventRedirect||!t.finalRedirectUrl||(e.triggerEvent("addToMainCartRedirect.wcpw",[e,r,t]),e.options.documentNode.location=t.finalRedirectUrl),t)})):t.when()},a.prototype.addToMainCartRepeat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getContent=!0,e.preventRedirect=!0,this.addToMainCart(t,e)},a.prototype.submit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hasError=!1,this.productsWithError=[];var a=this.element.querySelector('[data-component~="wcpw-form"]')||this.options.documentNode.querySelector('[data-component~="wcpw-form"]'),i=this.serializeObject(a),o={action:this.options.ajaxActions.submit,productToAddKey:null,productsToAdd:[],productsToAddChecked:[]};if(e=this.extendObject(o,e,i),r=this.extendObject({passProducts:!0,passStepData:!0},r),e.productToAddKey){for(var n in e.productsToAdd)if(e.productsToAdd.hasOwnProperty(n)){var s=e.productsToAdd[n];"".concat(s.step_id,"-").concat(s.product_id)!==e.productToAddKey?delete e.productsToAdd[n]:e.productsToAddChecked=_defineProperty({},s.step_id,[s.product_id])}}else delete e.productToAddKey;return this.triggerEvent("submit.wcpw",[this,e]),this.hasError?(this.triggerEvent("submitError.wcpw",[this,e]),t.when()):this.ajaxRequest(e,r)},a.prototype.navRouter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.action;switch(delete t.action,r){case"skip-step":return this.skipStep(t,e);case"skip-all":return this.skipAll(t,e);case"submit-and-skip-all":return this.submitAndSkipAll(t,e);case"submit":return this.submit(t,e);case"add-to-main-cart":return this.addToMainCart(t,e);case"add-to-main-cart-repeat":return this.addToMainCartRepeat(t,e);case"reset":return this.reset(t,e);case"none":return null;default:return this.getStep(t,e)}},a.prototype.skipStep=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this.extendObject({action:this.options.ajaxActions.skipStep},t),this.ajaxRequest(t,e)},a.prototype.submitAndSkipAll=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this.extendObject({action:this.options.ajaxActions.submitAndSkipAll},t),this.submit(t,e)},a.prototype.skipAll=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this.extendObject({action:this.options.ajaxActions.skipAll},t),this.ajaxRequest(t,e)},a.prototype.getStep=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this.extendObject({action:this.options.ajaxActions.getStep},t),this.ajaxRequest(t,e)},a.prototype.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this.extendObject({action:this.options.ajaxActions.reset},t),this.ajaxRequest(t,e)},a.prototype.parseObject=function(t,e,r){var a=/^[^\[\]]+\[]/.test(e),i=/^[^\[\]]+\[[^\[\]]+]/.test(e),o=e.replace(/\[.*/,"");if(a)t[o]||(t[o]=[]);else{if(!i)return t.push?t.push(r):t[o]=r,null;t[o]||(t[o]={})}var n=e.match(/\[[^\[\]]*]/g);return n[0]=n[0].replace(/\[|]/g,""),this.parseObject(t[o],n.join(""),r)},a.prototype.serializeObject=function(t){var e,r={},a=_createForOfIteratorHelper(new FormData(t).entries());try{for(a.s();!(e=a.n()).done;){var i=e.value;this.parseObject(r,i[0],i[1])}}catch(t){a.e(t)}finally{a.f()}return r},a.prototype.getQueryArgs=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.windowNode.location.search;return"undefined"==typeof URLSearchParams?{}:new URLSearchParams(t)},a.prototype.setQueryArg=function(t){if(!this.options.windowNode.history||!this.options.windowNode.history.pushState)return this;var e=this.getQueryArgs();if(!e.get)return this;for(var r in t)t.hasOwnProperty(r)&&("boolean"!=typeof t[r]||t[r]?e.set(r,t[r]):e.delete(r));var a=this.options.windowNode.location.protocol+"//"+this.options.windowNode.location.host+this.options.windowNode.location.pathname+"?"+e.toString();return this.options.windowNode.history.pushState({path:a},"",a),this},a.prototype.queryStringToObject=function(t){var e={};if(!t)return e;var r=JSON.parse('{"'+decodeURI(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');for(var a in r)r.hasOwnProperty(a)&&this.parseObject(e,a,r[a]);return e},a.prototype.vibrate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[200];return"vibrate"in this.options.windowNode.navigator?this.options.windowNode.navigator.vibrate(t):"oVibrate"in this.options.windowNode.navigator?this.options.windowNode.navigator.oVibrate(t):"mozVibrate"in this.options.windowNode.navigator?this.options.windowNode.navigator.mozVibrate(t):"webkitVibrate"in this.options.windowNode.navigator&&this.options.windowNode.navigator.webkitVibrate(t),this},a.prototype.setClipboard=function(t){if(this.options.windowNode.clipboardData&&this.options.windowNode.clipboardData.setData)return this.options.windowNode.clipboardData.setData("Text",t),!0;if(this.options.documentNode.queryCommandSupported&&this.options.documentNode.queryCommandSupported("copy")){var e=this.options.documentNode.createElement("textarea");e.textContent=t,e.style.position="fixed",this.options.documentNode.body.appendChild(e),e.select();try{return this.options.documentNode.execCommand("copy")}catch(t){return!1}finally{this.options.documentNode.body.removeChild(e)}}return!1},a.prototype.isScrolledIntoView=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.getBoundingClientRect();return!e&&r.top>=0&&r.top<=this.options.windowNode.innerHeight||e&&r.top>=0&&r.bottom<=this.options.windowNode.innerHeight},a.prototype.scrollToElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,a=!0===this.options.windowNode.matchMedia("(prefers-reduced-motion: reduce)")||!0===this.options.windowNode.matchMedia("(prefers-reduced-motion: reduce)").matches;return this.$root.stop().animate({scrollTop:t.getBoundingClientRect().top+this.options.windowNode.scrollY-Number(e)},r*!a),this},a.prototype.objectToQueryParam=function(e){return t.param(e)},a.prototype.extendObject=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.extend.apply(t,[{}].concat(r))},t.fn[e]=function(r){return this.each((function(){t.data(this,e)||t.data(this,e,new a(this,r))}))}}));